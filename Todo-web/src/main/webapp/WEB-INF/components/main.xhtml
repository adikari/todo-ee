<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://java.sun.com/jsf/html"
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
             xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:panelGroup id="main">
        <div class="title">
            <h1>#{todoBean.selectedList.title}</h1>
            <h:form>
                <h:commandLink class="delete"><i class="material-icons">delete</i></h:commandLink>
            </h:form>
        </div>

        <div class="new input-field">
            <h:form onsubmit="return false;">
                <h:inputText a:placeholder="New todo item" value="#{todoBean.newTodoItem}">
                    <f:ajax execute="@form" render=":main" listener="#{todoBean.addTodoItem}" event="change" resetValues="true" />
                </h:inputText>
            </h:form>
        </div>

        <h:panelGroup id="todoItems">
            <ul>
                <ui:repeat value="#{todoBean.selectedList.todoItems}" var="todoItem">
                    <ui:include src="todoitem.xhtml" />
                </ui:repeat>
            </ul>
        </h:panelGroup>
    </h:panelGroup>
</ui:fragment>

